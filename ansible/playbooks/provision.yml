---
- name: Post-provision bare-metal server
  hosts: all
  become: true
  vars_files:
    - vars/server.yml

  tasks:
    - name: Configure static network (cloud-init already applied)
      ansible.builtin.debug:
        msg: "Server {{ inventory_hostname }} configured with IP {{ server_ip }}"

    - name: Verify SSH connectivity
      ansible.builtin.wait_for:
        host: "{{ server_ip }}"
        port: 22
        timeout: 30
